{"version":3,"sources":["../../src/pages/notifications/notifications.module.ts","../../src/pages/notifications/notifications.ts"],"names":[],"mappings":"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","file":"9.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { NotificationsPage } from './notifications';\n\n@NgModule({\n  declarations: [\n    NotificationsPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(NotificationsPage),\n  ],\n})\nexport class NotificationsPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/notifications/notifications.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, AlertController } from 'ionic-angular';\nimport { NativeStorage } from '@ionic-native/native-storage';\nimport {PhenoApi} from '../../providers/pheno-api/pheno-api';\n\n/**\n * Generated class for the NotificationsPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-notifications',\n  templateUrl: 'notifications.html',\n})\nexport class NotificationsPage {\n\n  private notifications:any=[];\n  private user:any;\n\n  constructor(\n    public navCtrl: NavController, \n    public navParams: NavParams,\n    public phenoApi: PhenoApi,\n    public alertCtrl: AlertController,\n    private nativeStorage:NativeStorage\n  ) {\n\n    this.notifications.error='1';\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad NotificationsPage');\n    this.nativeStorage.getItem('user')\n    .then(\n      data => {\n        this.user=data;\n        console.log('user stored-> '+JSON.stringify(data))\n        this.getNotifications(this.user.id);\n      },\n      error => console.error(error)\n    );\n    \n  }\n\n  getNotifications(iduser){\n    this.phenoApi.getNotifications(iduser).subscribe(\n        data => {this.notifications=data},\n        err => console.log(err),\n        () => console.log(this.notifications)\n      );\n  }\n\n  openObservationPage(notification){\n    this.markAsRead(notification);\n    this.navCtrl.push('ObservationPage',{id:notification.idobservation});\n  }\n\n  markAsRead(notification){\n    console.log('marking:');\n    console.log(notification);\n\n    this.phenoApi.markNotificationAsRead(notification).subscribe(\n          data => {this.notifications=data},\n          err => console.log(err),\n          () => console.log('done')\n        );\n\n  }\n\n  markAllAsRead(){\n    console.log('marking all for user '+this.user.id);\n    \n    let alert = this.alertCtrl.create({\n      title: 'Mark all as read',\n      buttons: [\n        {\n          text: 'yes',\n          handler: () => {\n             this.phenoApi.markAllAsRead(this.user.id).subscribe(\n              data => {this.notifications=data},\n              err => console.log(err),\n              () => console.log('done')\n            );\n          }\n        },\n        {\n          text: 'no',\n          handler: () => {\n            console.log('cancel clicked');\n          }\n        }\n      ]\n    });\n        \n    alert.present();\n    \n  }\n  \n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/notifications/notifications.ts"],"sourceRoot":""}