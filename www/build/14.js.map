{"version":3,"sources":["../../src/pages/add-observation-media/add-observation-media.module.ts","../../src/pages/add-observation-media/add-observation-media.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAyC;AACO;AACkB;AAEK;AACN;AACjB;AAE1C,+BAAgC,IAAU;IAC9C,MAAM,CAAC,IAAI,uFAAmB,CAAC,IAAI,EAAE,gBAAgB,EAAE,OAAO,CAAC,CAAC;AAClE,CAAC;AAiBD,IAAa,6BAA6B;IAA1C;IAA4C,CAAC;IAAD,oCAAC;AAAD,CAAC;AAAhC,6BAA6B;IAfzC,uEAAQ,CAAC;QACR,YAAY,EAAE;YACZ,uFAAuB;SACxB;QACD,OAAO,EAAE;YACP,sEAAe,CAAC,QAAQ,CAAC,uFAAuB,CAAC;YACjD,4EAAe,CAAC,QAAQ,CAAC;gBACvB,MAAM,EAAE;oBACE,OAAO,EAAE,4EAAe;oBACxB,UAAU,EAAE,CAAC,qBAAqB,CAAC;oBACnC,IAAI,EAAE,CAAC,2DAAI,CAAC;iBACb;aACV,CAAC;SACH;KACF,CAAC;GACW,6BAA6B,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3BY;AACuC;AAChC;AACA;AACN;AACb;AACM;AACN;AACA;AACH;AAKvC;;;;;GAKG;AAOH,IAAa,uBAAuB;IAqBlC,iCACS,OAAsB,EACtB,SAAoB,EACnB,SAA2B,EAC3B,MAAa,EACb,aAA4B,EAC5B,IAAU,EACV,EAAa,EACb,SAA0B,EAC1B,OAAgB,EAChB,MAAa,EACb,IAAS;QAVV,YAAO,GAAP,OAAO,CAAe;QACtB,cAAS,GAAT,SAAS,CAAW;QACnB,cAAS,GAAT,SAAS,CAAkB;QAC3B,WAAM,GAAN,MAAM,CAAO;QACb,kBAAa,GAAb,aAAa,CAAe;QAC5B,SAAI,GAAJ,IAAI,CAAM;QACV,OAAE,GAAF,EAAE,CAAW;QACb,cAAS,GAAT,SAAS,CAAiB;QAC1B,YAAO,GAAP,OAAO,CAAS;QAChB,WAAM,GAAN,MAAM,CAAO;QACb,SAAI,GAAJ,IAAI,CAAK;QA5BX,kBAAa,GAAO,CAAC,CAAC;QAGtB,gBAAW,GAAK,MAAM,CAAC;QA2B7B,IAAI,CAAC,aAAa,GAAC,EAAE,CAAC;QACtB,IAAI,CAAC,WAAW,GAAC,EAAE,CAAC;QACpB,IAAI,CAAC,WAAW,CAAC,KAAK,GAAC,IAAI,CAAC;QAC5B,IAAI,CAAC,WAAW,CAAC,WAAW,GAAC,IAAI,CAAC;QAClC,IAAI,CAAC,WAAW,GAAC,IAAI,CAAC;IACxB,CAAC;IAED,gDAAc,GAAd;QACE,OAAO,CAAC,GAAG,CAAC,wCAAwC,CAAC,CAAC;QACtD,IAAI,CAAC,eAAe,EAAE,CAAC;QACvB,IAAI,CAAC,YAAY,EAAE,CAAC;QAEpB,IAAI,CAAC,oBAAoB,EAAE,CAAC;IAC9B,CAAC;IAED,sDAAsD;IACtD,8CAAY,GAAZ;QAAA,iBAiBC;QAhBC,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,KAAK,MAAM,CAAC,CAAC,CAAC;YACjC,OAAO,CAAC,GAAG,CAAC,wBAAwB,CAAC,CAAC;YACtC,IAAI,CAAC,aAAa,GAAC,CAAC,CAAC;QACvB,CAAC;QAAA,IAAI,EAAC;YACJ,IAAI,CAAC,aAAa,GAAC,CAAC,CAAC;QACvB,CAAC;QAED,qCAAqC;QACpC,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,sBAAsB,EAAE,UAAC,CAAC;YAC/C,KAAI,CAAC,aAAa,GAAC,CAAC,CAAC;QACvB,CAAC,CAAC,CAAC;QAEH,qCAAqC;QACrC,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,mBAAmB,EAAE,UAAC,CAAC;YAC3C,KAAI,CAAC,aAAa,GAAC,CAAC,CAAC;QACvB,CAAC,CAAC,CAAC;IACL,CAAC;IAED,sDAAoB,GAApB;QAAA,iBAyBC;QAxBC,wBAAwB;QACxB,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC,SAAS,CAC7C,eAAK,IAAK,KAAI,CAAC,mBAAmB,GAAE,KAAK,GAAC,CAC3C;QAED,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAC,SAAS,CAC/C,eAAK,IAAK,KAAI,CAAC,4BAA4B,GAAE,KAAK,GAAC,CACpD;QAED,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,SAAS,CACpC,eAAK,IAAK,KAAI,CAAC,UAAU,GAAE,KAAK,GAAC,CAClC;QAED,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,SAAS,CACpC,eAAK,IAAK,KAAI,CAAC,UAAU,GAAE,KAAK,GAAC,CAClC;QAED,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC,SAAS,CAC1C,eAAK,IAAK,KAAI,CAAC,oBAAoB,GAAE,KAAK,GAAC,CAC5C;QAED,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAC,SAAS,CAC9C,eAAK,IAAK,KAAI,CAAC,6BAA6B,GAAE,KAAK,GAAC,CACrD;IACH,CAAC;IAED,iDAAe,GAAf;QAAA,iBAMC;QALC,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,aAAa,CAAC;aACtC,IAAI,CACH,cAAI,IAAK,OAAO,CAAC,GAAG,CAAC,cAAc,GAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,EAAC,KAAI,CAAC,WAAW,GAAC,IAAI,GAAC,EAChF,eAAK,IAAI,cAAO,CAAC,KAAK,CAAC,KAAK,CAAC,EAApB,CAAoB,CAChC,CAAC;IACJ,CAAC;IAED,6CAAW,GAAX;QAAA,iBA4BC;QA3BC,IAAI,IAAI,GAAC,IAAI,CAAC;QAEd,IAAM,OAAO,GAAkB;YAC7B,OAAO,EAAE,GAAG;YACZ,eAAe,EAAE,IAAI,CAAC,MAAM,CAAC,eAAe,CAAC,QAAQ;YACrD,YAAY,EAAE,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,IAAI;YAC3C,kBAAkB,EAAE,IAAI;YACxB,YAAY,EAAC,IAAI;YACjB,WAAW,EAAC,IAAI;SACjB;QAED,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,UAAC,SAAS;YAC7C,OAAO,CAAC,GAAG,CAAC,SAAS,GAAC,0BAA0B,CAAC,CAAC;YAClD,qDAAqD;YACrD,KAAI,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,IAAI,CAC5B,kBAAQ,IAAM,OAAO,CAAC,GAAG,CAAC,YAAY,GAAC,QAAQ,CAAC,EAAC,KAAI,CAAC,aAAa,CAAC,IAAI,CAAC,EAAC,EAAE,EAAC,KAAI,CAAC,aAAa,CAAC,MAAM,EAAC,SAAS,EAAC,QAAQ,EAAC,UAAU,EAAC,SAAS,EAAC,YAAY,EAAC,IAAI,CAAC,GAAG,EAAE,EAAC,CAAC,GAAC,EACzK,eAAK,IAAI,cAAO,CAAC,KAAK,CAAC,sBAAsB,EAAE,KAAK,CAAC,EAA5C,CAA4C,CACtD;YAED,0DAA0D;YAC1D,IAAI,IAAI,GAAC,KAAI,CAAC;YAEd,KAAI,CAAC,WAAW,GAAC,KAAK,CAAC;QACxB,CAAC,EAAE,UAAC,GAAG;YACN,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;YACjB,eAAe;QAChB,CAAC,CAAC,CAAC;IACN,CAAC;IAED,wDAAsB,GAAtB;QAAA,iBAmCC;QAlCC,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC;YACnB,eAAe,EAAE,IAAI,CAAC,MAAM,CAAC,eAAe,CAAC,QAAQ;YACrD,UAAU,EAAE,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAAC,YAAY;YACtD,kBAAkB,EAAE,IAAI;YACxB,YAAY,EAAC,IAAI;YACjB,WAAW,EAAC,IAAI;YAChB,SAAS,EAAE,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,QAAQ;SAC5C,CAAC,CAAC,IAAI,CAAC,UAAC,SAAS;YAEd,IAAI,GAAG,GAAG,SAAS,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,+BAA+B;YAErE,EAAE,EAAC,GAAG,IAAE,KAAK,CAAC,EAAC;gBACb,KAAI,CAAC,aAAa,CAAC,IAAI,CAAC,EAAC,SAAS,EAAC,SAAS,EAAC,UAAU,EAAC,OAAO,EAAC,YAAY,EAAC,IAAI,CAAC,GAAG,EAAE,EAAC,CAAC,CAAC;YAE5F,CAAC;YAAA,IAAI,EAAC;gBACJ,qDAAqD;gBACrD,OAAO,CAAC,GAAG,CAAC,SAAS,GAAC,0BAA0B,CAAC,CAAC;gBAClD,KAAI,CAAC,IAAI,CAAC,yBAAyB,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,eAAK;oBACvD,KAAI,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC,CAAC,IAAI,CAClC,kBAAQ,IAAM,OAAO,CAAC,GAAG,CAAC,YAAY,GAAC,QAAQ,CAAC,EAAC,KAAI,CAAC,aAAa,CAAC,IAAI,CAAC,EAAC,EAAE,EAAC,KAAI,CAAC,aAAa,CAAC,MAAM,EAAC,SAAS,EAAC,QAAQ,EAAC,UAAU,EAAC,SAAS,EAAC,YAAY,EAAC,IAAI,CAAC,GAAG,EAAE,EAAC,CAAC,GAAC,EACzK,eAAK,IAAI,cAAO,CAAC,KAAK,CAAC,sBAAsB,EAAE,KAAK,CAAC,EAA5C,CAA4C,CACtD;gBACD,CAAC,CAAC;YAEJ,CAAC;YAED,0DAA0D;YAC1D,IAAI,IAAI,GAAC,KAAI,CAAC;YAEd,KAAI,CAAC,WAAW,GAAC,KAAK,CAAC;QAE3B,CAAC,EAAE,UAAC,GAAG;YACH,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QACrB,CAAC,CAAC,CAAC;IACL,CAAC;IAED,8CAAY,GAAZ,UAAa,GAAG,EAAC,QAAQ;QACvB,IAAI,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;YAChC,KAAK,EAAE,GAAG;YACV,QAAQ,EAAE,QAAQ;YAClB,OAAO,EAAE,CAAC,IAAI,CAAC;SAChB,CAAC,CAAC;QACH,KAAK,CAAC,OAAO,EAAE,CAAC;IAClB,CAAC;IAED,sDAAoB,GAApB;QAAA,iBAsBD;QArBC,IAAI,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;YAChC,KAAK,EAAE,IAAI,CAAC,oBAAoB;YAChC,OAAO,EAAE,IAAI,CAAC,6BAA6B;YAC3C,OAAO,EAAE;gBACP;oBACE,IAAI,EAAE,IAAI,CAAC,UAAU;oBACrB,IAAI,EAAE,QAAQ;oBACd,OAAO,EAAE;wBACP,OAAO,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;oBAChC,CAAC;iBACF;gBACD;oBACE,IAAI,EAAE,IAAI,CAAC,UAAU;oBACrB,OAAO,EAAE;wBACP,OAAO,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;wBAC3B,KAAI,CAAC,aAAa,EAAE,CAAC;oBACvB,CAAC;iBACF;aACF;SACF,CAAC,CAAC;QACH,KAAK,CAAC,OAAO,EAAE,CAAC;IAClB,CAAC;IAEC,+CAAa,GAAb,UAAc,KAAK;QACjB,IAAI,CAAC,WAAW,GAAC,cAAc,CAAC;QAChC,IAAI,GAAG,GAAC,QAAQ,CAAC,sBAAsB,CAAC,MAAM,CAAC,CAAC;QAChD,GAAG,EAAC,IAAI,CAAC,GAAC,CAAC,EAAC,CAAC,GAAC,GAAG,CAAC,MAAM,EAAC,CAAC,EAAE,EAAC,CAAC;YAC5B,GAAG,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;QACtC,CAAC;QACD,KAAK,CAAC,aAAa,CAAC,SAAS,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;QAC9C,IAAI,CAAC,iBAAiB,GAAC,KAAK,CAAC,aAAa,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;IAChE,CAAC;IAED,4CAAU,GAAV;QACE,IAAI,CAAC,KAAK,GAAC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,YAAY,GAAC,GAAG,GAAC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,SAAS,CAAC,WAAW,CAAC,GAAG,CAAC,GAAC,CAAC,CAAC,CAAC;QAC5M,OAAO,CAAC,GAAG,CAAC,mBAAmB,GAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAC5C,gBAAgB;QAChB,IAAI,IAAI,GAAC,QAAQ,CAAC,sBAAsB,CAAC,SAAS,CAAC,CAAC;QACpD,GAAG,EAAC,IAAI,CAAC,GAAC,CAAC,EAAC,CAAC,GAAC,IAAI,CAAC,MAAM,EAAC,CAAC,EAAE,EAAC,CAAC;YAC7B,IAAI,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;YACpC,IAAI,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;QAClC,CAAC;QAED,mBAAmB;QACnB,IAAI,GAAG,GAAC,QAAQ,CAAC,cAAc,CAAC,OAAO,GAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;QAChE,OAAO,CAAC,GAAG,CAAC,UAAU,GAAC,GAAG,CAAC,CAAC;QAC5B,GAAG,CAAC,SAAS,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;QAC/B,GAAG,CAAC,SAAS,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;IAC/B,CAAC;IAED,+CAAa,GAAb;QAAA,iBAKC;QAJC,2CAA2C;QAC3C,IAAI,KAAK,GAAG,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,aAAG,IAAI,UAAG,CAAC,EAAE,IAAE,KAAI,CAAC,iBAAiB,EAA9B,CAA8B,CAAC,CAAC;QAChF,kCAAkC;QAClC,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,KAAK,EAAC,CAAC,CAAC,CAAC;IACrC,CAAC;IAED,6CAAW,GAAX;QAAA,iBAYC;QAXC,wCAAwC;QACxC,EAAE,EAAC,IAAI,CAAC,aAAa,CAAC,MAAM,IAAE,CAAC,CAAC,EAAC;YAC/B,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,mBAAmB,EAAC,IAAI,CAAC,4BAA4B,CAAC;QAC/E,CAAC;QAAA,IAAI,EAAC;YACJ,yBAAyB;YACzB,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,aAAa,CAAC;iBACtC,IAAI,CACH,cAAI,IAAI,YAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAnB,CAAmB,EAC3B,eAAK,IAAI,cAAO,CAAC,KAAK,CAAC,KAAK,CAAC,EAApB,CAAoB,CAChC,CAAC;QACJ,CAAC;IACH,CAAC;IAED,2CAAS,GAAT,UAAU,KAAK,EAAC,QAAQ;QACtB,IAAI,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;YAChC,KAAK,EAAE,KAAK;YACZ,QAAQ,EAAE,QAAQ;YAClB,OAAO,EAAE,CAAC,IAAI,CAAC;SAChB,CAAC,CAAC;QACH,KAAK,CAAC,OAAO,EAAE,CAAC;IAClB,CAAC;IAED,0CAAQ,GAAR,UAAS,IAAI;QAEX,+BAA+B;QAC/B,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,MAAM,IAAE,CAAC,CAAC,EAAC;YAEhC,OAAO,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC;YAC/B,2DAA2D;YAC3D,EAAE,EAAC,IAAI,CAAC,KAAK,IAAE,EAAE,IAAI,IAAI,CAAC,KAAK,IAAE,SAAS,CAAC,EAAC;gBAC1C,IAAI,CAAC,KAAK,GAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,YAAY,GAAC,GAAG,GAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,WAAW,CAAC,GAAG,CAAC,GAAC,CAAC,CAAC,CAAC;YAC/I,CAAC;YAED,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,aAAa,EAAC,EAAC,MAAM,EAAC,IAAI,CAAC,MAAM,EAAC,KAAK,EAAC,IAAI,CAAC,KAAK,EAAC,KAAK,EAAC,IAAI,CAAC,WAAW,CAAC,KAAK,EAAC,WAAW,EAAC,IAAI,CAAC,WAAW,CAAC,WAAW,EAAC,aAAa,EAAC,IAAI,CAAC,aAAa,EAAC,KAAK,EAAC,IAAI,CAAC,KAAK,EAAC,CAAC,CAAC;YACxM,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC;QAE7C,CAAC;QAAA,IAAI,EAAC;YACJ,IAAI,CAAC,SAAS,CAAC,iBAAiB,EAAC,8CAA8C,CAAC;QAClF,CAAC;IAEH,CAAC;IAEH,8BAAC;AAAD,CAAC;AAvRoB;IAAlB,0EAAS,CAAC,6DAAM,CAAC;8BAAS,6DAAM;uDAAC;AAFvB,uBAAuB;IALnC,wEAAS,EAAE;IACX,wEAAS,CAAC;QACT,QAAQ,EAAE,4BAA4B;OACG;KAC1C,CAAC;yEAuB+B;QACX,6EAAS;QACR,qEAAgB;QACpB,mFAAM;QACE,iEAAa;QACtB,iEAAI;QACP,sEAAU;QACF,uEAAe;QACjB,8DAAO;QACT,kEAAM;QACR,IAAI;AAyPpB;SAzRY,uBAAuB,iB","file":"14.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { AddObservationMediaPage } from './add-observation-media';\n\nimport { TranslateModule, TranslateLoader } from '@ngx-translate/core';\nimport { TranslateHttpLoader } from '@ngx-translate/http-loader';\nimport { HttpModule,Http } from '@angular/http';\n\nexport function createTranslateLoader(http: Http) {\n  return new TranslateHttpLoader(http, './assets/i18n/', '.json');\n}\n\n@NgModule({\n  declarations: [\n    AddObservationMediaPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(AddObservationMediaPage),\n    TranslateModule.forChild({\n      loader: {\n                provide: TranslateLoader,\n                useFactory: (createTranslateLoader),\n                deps: [Http]\n              }\n    })\n  ],\n})\nexport class AddObservationMediaPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/add-observation-media/add-observation-media.module.ts","import { Component, ElementRef } from '@angular/core';\nimport { IonicPage, NavController, NavParams, AlertController, Events } from 'ionic-angular';\nimport { Camera, CameraOptions } from '@ionic-native/camera';\nimport { NativeStorage } from '@ionic-native/native-storage';\nimport { TranslateService } from '@ngx-translate/core';\nimport { Crop } from '@ionic-native/crop';\nimport { Network } from '@ionic-native/network';\nimport { File } from '@ionic-native/file';\nimport { ViewChild } from '@angular/core';\nimport { Slides } from 'ionic-angular';\n\nimport * as L from 'leaflet';\n\n\n/**\n * Generated class for the AddObservationMediaPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-add-observation-media',\n  templateUrl: 'add-observation-media.html',\n})\nexport class AddObservationMediaPage {\n\n  @ViewChild(Slides) slider: Slides;\n\n  private mediaToUpload:any = 0;\n  private observation:any;\n  private showDefault:any;\n  private showActions:any='none';\n  private selectedPictureId:any;\n  private cover:any;\n  private networkStatus:any;\n\n  //strings\n  private str_add_media_error:any;\n  private str_add_media_error_subtitle:any;\n  private str_cancel:any;\n  private str_delete:any;\n  private str_confirm_deletion:any;\n  private str_confirm_deletion_subtitle:any;\n\n\n  constructor(\n    public navCtrl: NavController, \n    public navParams: NavParams,\n    private translate: TranslateService,\n    private camera:Camera,\n    private nativeStorage: NativeStorage,\n    private crop: Crop,\n    private el:ElementRef,\n    private alertCtrl: AlertController,\n    private network: Network,\n    private events:Events,\n    private file:File\n  ) {\n    this.mediaToUpload=[];\n    this.observation={};\n    this.observation.title=null;\n    this.observation.description=null;\n    this.showDefault=true;\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad AddObservationMediaPage');\n    this.loadFromStorage();\n    this.checkNetwork();\n\n    this.getTranslatedStrings();\n  }\n\n  //check current network status and subscribe to events\n  checkNetwork(){\n    if (this.network.type === 'none') {\n      console.log('we have no connection!');\n      this.networkStatus=0;\n    }else{\n      this.networkStatus=1;\n    }\n\n    //listen for user disconnection event\n     this.events.subscribe('network:disconnected', (e) => {\n      this.networkStatus=0;\n    });\n\n    //listen for user disconnection event\n    this.events.subscribe('network:connected', (e) => {\n      this.networkStatus=1;\n    });\n  }\n\n  getTranslatedStrings(){\n    //get translated strings\n    this.translate.get('ADD_MEDIA_ERROR').subscribe(\n      value => {this.str_add_media_error= value}\n    )\n\n    this.translate.get('ADD_MEDIA_ERROR_2').subscribe(\n      value => {this.str_add_media_error_subtitle= value}\n    )\n\n    this.translate.get('CANCEL').subscribe(\n      value => {this.str_cancel= value}\n    )\n\n    this.translate.get('DELETE').subscribe(\n      value => {this.str_delete= value}\n    )\n\n    this.translate.get('DELETE_MEDIA').subscribe(\n      value => {this.str_confirm_deletion= value}\n    )\n\n    this.translate.get('DELETE_MEDIA_SUB').subscribe(\n      value => {this.str_confirm_deletion_subtitle= value}\n    )\n  }\n\n  loadFromStorage(){\n    this.nativeStorage.getItem('observation')\n      .then(\n        data => {console.log('in storage: '+JSON.stringify(data)),this.observation=data},\n        error => console.error(error)\n    );\n  }\n\n  takePicture(){\n    var self=this;\n\n    const options: CameraOptions = {\n      quality: 100,\n      destinationType: this.camera.DestinationType.FILE_URI,\n      encodingType: this.camera.EncodingType.JPEG,\n      correctOrientation: true,\n      targetHeight:1024,\n      targetWidth:1024,\n    }\n\n    this.camera.getPicture(options).then((imageData) => {\n      console.log(imageData+' é imaxe, so cropping...');\n      //crop the image and store in the mediaToUpload array\n      this.crop.crop(imageData).then(\n        newImage =>  {console.log('newImage: '+newImage),this.mediaToUpload.push({id:this.mediaToUpload.length,media_url:newImage,media_type:'picture',media_prefix:Date.now()})},\n        error => console.error('Error cropping image', error)\n      )\n     \n      //timeout to wait until the slide is created by the system\n      var self=this;\n     \n      this.showDefault=false;\n     }, (err) => {\n      console.log(err);\n      // Handle error\n     });\n  }\n\n  takePictureFromGallery(){ //takes picture from gallery\n    this.camera.getPicture({\n        destinationType: this.camera.DestinationType.FILE_URI,\n        sourceType: this.camera.PictureSourceType.PHOTOLIBRARY,\n        correctOrientation: true,\n        targetHeight:1024,\n        targetWidth:1024,\n        mediaType: this.camera.MediaType.ALLMEDIA, //only pictures by now\n    }).then((imageData) => {\n\n        let ext = imageData.split('.').pop(); //get the extension of the file\n\n        if(ext=='mp4'){ //is a video?\n          this.mediaToUpload.push({media_url:imageData,media_type:'video',media_prefix:Date.now()});\n          \n        }else{ //or a image??\n          //crop the image and store in the mediaToUpload array\n          console.log(imageData+' é imaxe, so cropping...');\n          this.file.resolveLocalFilesystemUrl(imageData).then(entry => { //resolve url needed for ios\n            this.crop.crop(entry.toURL()).then(\n            newImage =>  {console.log('newImage: '+newImage),this.mediaToUpload.push({id:this.mediaToUpload.length,media_url:newImage,media_type:'picture',media_prefix:Date.now()})},\n            error => console.error('Error cropping image', error)\n          )\n          })\n          \n        }\n\n        //timeout to wait until the slide is created by the system\n        var self=this;\n               \n        this.showDefault=false;\n\n    }, (err) => {\n        console.log(err);\n    });\n  }\n  \n  presentAlert(msg,subTitle) {\n    let alert = this.alertCtrl.create({\n      title: msg,\n      subTitle: subTitle,\n      buttons: ['Ok']\n    });\n    alert.present();\n  }\n  \n  presentDeleteConfirm() {\n  let alert = this.alertCtrl.create({\n    title: this.str_confirm_deletion,\n    message: this.str_confirm_deletion_subtitle,\n    buttons: [\n      {\n        text: this.str_cancel,\n        role: 'cancel',\n        handler: () => {\n          console.log('Cancel clicked');\n        }\n      },\n      {\n        text: this.str_delete,\n        handler: () => {\n          console.log('Buy clicked');\n          this.deletePicture();\n        }\n      }\n    ]\n  });\n  alert.present();\n}\n\n  selectPicture(event){\n    this.showActions='inline-block';\n    var img=document.getElementsByClassName('imgp');\n    for(let i=0;i<img.length;i++){\n      img[i].classList.remove('selected');\n    }\n    event.currentTarget.classList.add('selected');\n    this.selectedPictureId=event.currentTarget.getAttribute('id'); \n  }\n\n  setAsCover(){\n    this.cover=this.mediaToUpload[this.selectedPictureId].media_prefix+'_'+this.mediaToUpload[this.selectedPictureId].media_url.substr(this.mediaToUpload[this.selectedPictureId].media_url.lastIndexOf('/')+1);\n    console.log('change cover to: '+this.cover);\n    //hide all stars\n    var star=document.getElementsByClassName('imgstar');\n    for(let i=0;i<star.length;i++){\n      star[i].classList.remove('visible');\n      star[i].classList.add('hidden');\n    }\n\n    //make visible this\n    let img=document.getElementById('star_'+this.selectedPictureId);\n    console.log('showing '+img);\n    img.classList.remove('hidden');\n    img.classList.add('visible');\n  }\n\n  deletePicture(){\n    //searches in the array and return position\n    var index = this.mediaToUpload.findIndex(obj => obj.id==this.selectedPictureId);\n    //delete the item in this position\n    this.mediaToUpload.splice(index,1);\n  }\n\n  openMapPage(){\n    //check that there is at least one image\n    if(this.mediaToUpload.length==0){\n      this.presentAlert(this.str_add_media_error,this.str_add_media_error_subtitle)\n    }else{\n      //get observation storage\n      this.nativeStorage.getItem('observation')\n        .then(\n          data => this.saveData(data),\n          error => console.error(error)\n      );\n    }\n  }\n\n  showAlert(title,subtitle){\n    let alert = this.alertCtrl.create({\n      title: title,\n      subTitle: subtitle,\n      buttons: ['Ok']\n    });\n    alert.present();\n  }\n\n  saveData(data){\n\n    //check that at least one image\n    if (this.mediaToUpload.length!=0){\n      \n      console.log('saving media...');\n      //if no cover is set, the first image will be used as cover\n      if(this.cover=='' || this.cover==undefined){\n        this.cover=this.mediaToUpload[0].media_prefix+'_'+this.mediaToUpload[0].media_url.substr(this.mediaToUpload[0].media_url.lastIndexOf('/')+1);\n      }\n      \n      this.nativeStorage.setItem('observation',{specie:data.specie,stage:data.stage,title:this.observation.title,description:this.observation.description,mediaToUpload:this.mediaToUpload,cover:this.cover});\n      this.navCtrl.push('AddObservationMapPage');\n\n    }else{\n      this.showAlert('No media added!','Need at least one image for your observation')\n    }\n    \n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/add-observation-media/add-observation-media.ts"],"sourceRoot":""}